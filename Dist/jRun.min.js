var jRun={version:"1.0.21",plugins:[],allowedInitTypes:["css","js"],urlPrefix:"",defaultType:"js",defaultLoadProperties:{waitLoading:!0,kind:!1,url:"",urls:[],cdn:!1,attributes:{},multiFileUrl:!1,afterLoad:function(){},beforeLoad:function(){},errorLoading:function(){}},notAllowedUserAttributes:["href","src"],loadedFiles:[],debugMode:!0,allowInit:!1,sanitizeName:function(n){return n.toString().replace(/\/|\.|-/g,"_")},setLoadedFlag:function(n){this.loadedFiles.push(n)},checkLoad:function(n){return-1<this.loadedFiles.indexOf(n)},deepExtend:function(n){n=n||{};for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t&&"object"==typeof t)for(var i in t)t.hasOwnProperty(i)&&("object"==typeof t[i]?n[i]=jRun.deepExtend(n[i],t[i]):n[i]=t[i])}return n},build:function(){return"undefined"!=typeof window&&(window.log=function(n,e){e=e||"log";var t=(new Error).stack.toString().split(/\r\n|\n/);console[e](n,"          ["+t[1]+"]")}),this.firstCall=!0,0<this.plugins.length?this.buildPlugIns():this.allowInit=!0,this},buildPlugIns:function(n){this.plugins=n||this.plugins,this.allowInit=!1,this.init(this.plugins,function(){jRun.allowInit=!0})},init:function(t,i){if(!jRun.allowInit&&!jRun.firstCall)return setTimeout(function(){jRun.init(t,i)},100),!1;jRun.firstCall=!1;var l=0,d=function(n){if(n.multiFileUrl||l++,n.afterLoad(),t.length===l){if(void 0===i||"function"!=typeof i){var e=(new Error).stack.toString().split(/\r\n|\n/);throw"CallBack should be a function "+typeof i+" given!          ["+e[1]+"]"}jRun.debugMode&&log("...... Start All Callback ......"),i()}},r=function(e){if(jRun.debugMode&&""===e.url)throw"File url is empty ["+(new Error).stack.toString().split(/\r\n|\n/)[1]+"]";var n=jRun.sanitizeName(e.url);if(jRun.checkLoad(n))return jRun.debugMode&&(log(n+" : Was already added !"),log(jRun.loadedFiles)),d(e),!1;jRun.setLoadedFlag(n);var t=e.kind?e.kind+"/":"",i=e.url.split(".").pop();jRun.allowedInitTypes.indexOf(i)<0&&(i=jRun.defaultType);var l,r,o=document.createElement("js"===i?"script":"link"),u=t+(l=e.url,r="."+i,null!==l&&null!==r&&-1!==l.indexOf(r,l.length-r.length)?e.url:e.url+"."+i);e.beforeLoad(),"js"===i?o.src=e.cdn?u:jRun.urlPrefix+"Javascript/"+u+"?jVer="+jRun.version:(o.type="text/css",o.rel="stylesheet",o.href=e.cdn?u:jRun.urlPrefix+"Css/"+u+"?jVer="+jRun.version),jRun.notAllowedUserAttributes.forEach(function(n){delete e.attributes[n]}),(o=jRun.deepExtend(o,e.attributes)).onload=function(){jRun.debugMode&&log("Loaded -> "+e.multiFileUrl+" -> "+e.url),d(e)},o.onerror=function(){e.errorLoading(),jRun.debugMode&&log("Error loading -> "+e.multiFileUrl+" -> "+e.url)},document.head.appendChild(o)};(t="string"==typeof t?[t]:t).forEach(function(n){var e={};e=jRun.deepExtend({},jRun.defaultLoadProperties,n),"string"==typeof n&&(e.url=n,e.kind="Utility");var t=Object.keys(e.urls);0<t.length?t.forEach(function(n){e.multiFileUrl=1!=n,e.url=e.urls[n],r(e)}):r(e)})}}.build();"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=jRun);